{% extends "base.html" %}
{% load static %}

	{% block title %} محصولات طراحان {% endblock %}

{% block content %}

	<div class="container mx-auto p-4 md:flex gap-6">
		<!-- sideBar -->
			<aside class="w-full md:w-1/4 bg-gray-100 p-4 rounded-lg mb-6">
			    
			    <!-- sideBarSlider -->
			    	<div class="mb-6">
					  <h2 class="text-lg font-bold mb-2 flex"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="22" height="22" fill="currentColor"><path d="M14 4.4375C15.3462 4.4375 16.4375 3.34619 16.4375 2H17.5625C17.5625 3.34619 18.6538 4.4375 20 4.4375V5.5625C18.6538 5.5625 17.5625 6.65381 17.5625 8H16.4375C16.4375 6.65381 15.3462 5.5625 14 5.5625V4.4375ZM1 11C4.31371 11 7 8.31371 7 5H9C9 8.31371 11.6863 11 15 11V13C11.6863 13 9 15.6863 9 19H7C7 15.6863 4.31371 13 1 13V11ZM4.87601 12C6.18717 12.7276 7.27243 13.8128 8 15.124 8.72757 13.8128 9.81283 12.7276 11.124 12 9.81283 11.2724 8.72757 10.1872 8 8.87601 7.27243 10.1872 6.18717 11.2724 4.87601 12ZM17.25 14C17.25 15.7949 15.7949 17.25 14 17.25V18.75C15.7949 18.75 17.25 20.2051 17.25 22H18.75C18.75 20.2051 20.2051 18.75 22 18.75V17.25C20.2051 17.25 18.75 15.7949 18.75 14H17.25Z"></path></svg>محصولات ویژه</h2>
					  <div class="swiper relative" style="border-radius: 10px;">
					    <div class="swiper-wrapper">
					    	
					    	{% for product in featured_products %}
							    <div class="swiper-slide">
							        <a href="{% url 'product_detail' product.slug %}" class="block relative rounded-lg overflow-hidden shadow-lg">
							          <img src="{{ product.image.url }}" alt="{{ product.name }}" class="w-full h-full object-cover">
							          <div class="absolute bottom-0 left-0 right-0 bg-white/40 backdrop-blur-md text-center py-2">
							            <span class="font-medium text-gray-800 pr-5">
							            	{{ product.name }}
							            </span>
							          </div>
							        </a>
							    </div>
							{% endfor %}

					    </div>

					    <!-- دکمه‌های ناوبری -->
					    <div class="swiper-button-next"></div>
					    <div class="swiper-button-prev"></div>
					  </div>
					</div>
					<script>
						const swiper = new Swiper(".swiper", {
					    loop: true,               // چرخش بی‌نهایت
					    slidesPerView: 1,         // تعداد اسلاید در هر ردیف
					    spaceBetween: 20,         // فاصله بین اسلایدها
					    autoplay: {
					      delay: 3000,            // هر 3 ثانیه اسلاید عوض شود
					      disableOnInteraction: false, // بعد از کلیک روی دکمه هم اتومات ادامه یابد
					    },
					    navigation: {
					      nextEl: ".swiper-button-next",
					      prevEl: ".swiper-button-prev",
					    },
					    breakpoints: {            // ریسپانسیو
					      0: { slidesPerView: 1 },      // موبایل
					      640: { slidesPerView: 1 },    // تبلت کوچک
					      1024: { slidesPerView: 1 },   // دسکتاپ
					    },
					  });
					</script>
			    <!-- /sideBarSlider -->
			    <ul class="menu space-y-2 bg-base-200 text-base-content w-full mt-6">
				    <li>
				        <details>
				        	<summary><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="18" height="18" fill="currentColor"><path d="M4 3C3.44772 3 3 3.44772 3 4V20C3 20.5523 3.44772 21 4 21H14C14.5523 21 15 20.5523 15 20V15.2973L15.9995 19.9996C16.1143 20.5398 16.6454 20.8847 17.1856 20.7699L21.0982 19.9382C21.6384 19.8234 21.9832 19.2924 21.8684 18.7522L18.9576 5.0581C18.8428 4.51788 18.3118 4.17304 17.7716 4.28786L14.9927 4.87853C14.9328 4.38353 14.5112 4 14 4H10C10 3.44772 9.55228 3 9 3H4ZM10 6H13V14H10V6ZM10 19V16H13V19H10ZM8 5V15H5V5H8ZM8 17V19H5V17H8ZM17.3321 16.6496L19.2884 16.2338L19.7042 18.1898L17.7479 18.6057L17.3321 16.6496ZM16.9163 14.6933L15.253 6.86789L17.2092 6.45207L18.8726 14.2775L16.9163 14.6933Z"></path></svg>دسته بندی
				        	</summary>
					        <ul class="bg-base-100 rounded-t-none p-2 grid grid-cols-3 gap-2">
					            {% for category in categories %}
								    <li><a href="{% url 'category_detail' category.slug %}">{{ category.name }}</a></li>
								{% endfor %}
					        </ul>
				        </details>
				    </li>
			    </ul>
			</aside>
		<!-- /sideBar -->

		
		<main class="w-full md:w-3/4">
		    <!-- نوار مرتب سازی -->
		    <div class="flex flex-wrap justify-between items-center mb-4 bg-white p-2 rounded shadow">
		      <h2 class="text-xl font-bold flex"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22" width="22" height="22" fill="currentColor"><path d="M10 18H14V16H10V18ZM3 6V8H21V6H3ZM6 13H18V11H6V13Z"></path></svg>مرتب‌سازی</h2>
		      <div class="flex gap-2">
		        <a href="" class="btn btn-md btn-outline">جدیدترین‌ها</a>
		        <a href="" class="btn btn-md btn-outline">گران‌ترین</a>
		        <a href="" class="btn btn-md btn-outline">ارزان‌ترین</a>
		      </div>
		    </div>

		    <!-- محصولات -->
		    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">

				{% for product in page_obj %}
			      	<div class="card bg-base-100 shadow-md p-1 rounded">
				      <figure>
				        <img src="{{ product.image.url }}" alt="{{ product.name }}" class="rounded">
				      </figure>
				      <div class="card-body text-center p-1">
				        <h3 class="card-title">{{ product.name }}</h3>
				        <div class="flex gap-1 mt-2">
				        	<p class="text-lg text-neutral font-semibold flex">تومان  {{ product.price }}</p>
				        </div>
				        <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-2 card-actions justify-center mt-2">
				          <a href="{% url 'product_detail' product.slug %}" class="btn btn-md btn-info">نمایش محصول</a>
				          <a href="{% url 'product_detail' product.slug %}" class="btn btn-md btn-success">خرید</a>
				        </div>
				      </div>
				    </div>
			    {% endfor %}

		    </div>
		    <!-- pagination -->
		    	<div class="w-full bg-base-200 py-4">
				  <div class="flex justify-center">
				    <div class="join justify-center">

					  {% if page_obj.has_previous %}
					    <a href="?page={{ page_obj.previous_page_number }}" class="join-item btn hover-pagination">« قبلی</a>
					  {% endif %}

					  {% for i in first_pages %}
					    <a href="?page={{ i }}"
					       class="join-item btn hover-pagination {% if page_obj.number == i %}active-pagination{% endif %}">
					      {{ i }}
					    </a>
					  {% endfor %}

					  {% if page_obj.paginator.num_pages > 5 %}
					    
					    {% if page_obj.number > 3 and page_obj.number < page_obj.paginator.num_pages %}
					      <span class="join-item btn btn-disabled">...</span>
					      <a href="?page={{ page_obj.number }}"
					         class="join-item btn hover-pagination active-pagination">
					        {{ page_obj.number }}
					      </a>
					      <span class="join-item btn btn-disabled">...</span>
					    {% else %}
					      <span class="join-item btn btn-disabled">...</span>
					    {% endif %}

					    <a href="?page={{ page_obj.paginator.num_pages }}"
					       class="join-item btn hover-pagination {% if page_obj.number == page_obj.paginator.num_pages %}active-pagination{% endif %}">
					      {{ page_obj.paginator.num_pages }}
					    </a>
					  {% endif %}

					  {% if page_obj.has_next %}
					    <a href="?page={{ page_obj.next_page_number }}" class="join-item btn hover-pagination">بعدی »</a>
					  {% endif %}

					</div>
				  </div>
				</div>
		    <!-- /pagination -->
		</main>
	</div>


{% endblock %}