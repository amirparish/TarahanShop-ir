{% extends "base.html" %}
{% load static %}

	{% block title %}طراحان شاپ{% endblock %}

	{% block content %}
		<!-- mainCarousel -->
			<div class="w-full relative">
				<!-- Swiper -->
				  <swiper-container class="mySwiper" pagination="true" pagination-clickable="true" navigation="true" space-between="30"
				    centered-slides="true" autoplay-delay="2500" autoplay-disable-on-interaction="false">
				    {% for slider in sliders %}
				    	<swiper-slide>
					    	<img src="{{ slider.image.url }}" alt="{{ slider.title }}" class="w-full" />
					    </swiper-slide>
				    {% endfor %}
				    <div class="autoplay-progress" slot="container-end">
				      <svg viewBox="0 0 48 48">
				        <circle cx="24" cy="24" r="20"></circle>
				      </svg>
				      <span></span>
				    </div>
				  </swiper-container>

				  <!-- Swiper JS -->
				  <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-element-bundle.min.js"></script>

				  <!-- Initialize Swiper -->
				  <script>
				    const progressCircle = document.querySelector(".autoplay-progress svg");
				    const progressContent = document.querySelector(".autoplay-progress span");

				    const swiperEl = document.querySelector("swiper-container");
				    swiperEl.addEventListener("autoplaytimeleft", (e) => {
				      const [swiper, time, progress] = e.detail;
				      progressCircle.style.setProperty("--progress", 1 - progress);
				      progressContent.textContent = `${Math.ceil(time / 1000)}s`;
				    });
				  </script>
				<!-- /Swiper -->
			</div>
			
			<!-- Initialize Swiper -->
			
		<!-- /mainCarousel -->

		<!-- topProduct -->
			<section class="my-10 px-2">
			  <div class="grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-2 bg-gradient-to-tr from-red-500 to-red-800 py-5 px-2">
			    <!-- ستون اول: فروش شگفت انگیز -->
			    <div class="flex flex-col justify-center items-center bg-gradient-to-tr from-red-500 to-red-800 text-white p-6 rounded">
			      <h2 class="text-2xl font-bold mb-2">فروش شگفت انگیز</h2>
			      <p class="text-center">تخفیف‌های ویژه امروز!</p>
			      <img src="{% static 'img/per.png' %}" alt="فروش شگفت انگیز" class="mt-4 rounded">
			    </div>
			    
			    {% for product in amazing_products %}
		            <div class="card bg-base-100 shadow-md p-1 rounded">
				      <figure>
				        <img src="{{ product.image.url }}" alt="{{ product.name }}" class="rounded">
				      </figure>
				      <div class="card-body text-center p-1">
				        <h3 class="card-title">{{ product.name }}</h3>
				        <p class="text-lg text-green-500 font-semibold">{{ product.price }} تومان</p>
				        <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-2 card-actions justify-center mt-2">
				        	<a href="{% url 'product_detail' product.slug %}" class="btn btn-sm btn-outline">نمایش محصول</a>
				        	<a href="{% url 'product_detail' product.slug %}" class="btn btn-sm btn-primary">خرید</a>
				        </div>
				      </div>
				    </div>
		        {% endfor %}

			  </div>
			</section>
		<!-- /topProduct -->

		<!-- catPro -->
			<div class="py-4 px-2">
			  <div class="grid grid-cols-3 sm:grid-cols-4 md:grid-cols-12 gap-4 justify-items-center">
			    
			    {% for category in categories %}
				    <div class="relative overflow-hidden group cursor-pointer p-1 w-28 h-28 sm:w-24 sm:h-24 md:w-28 md:h-28">
				      <img src="{{ category.image.url }}" alt="{{ category.name }}" class="w-full h-full object-cover transition-transform duration-300 group-hover:scale-105">
				      <div class="absolute inset-0 bg-opacity-40 flex items-center justify-center">
				        <h3 class="text-white text-center font-bold drop-shadow-lg px-2">
				        	<a href="{% url 'category_detail' category.slug %}">{{ category.name }}</a>
				        </h3>
				      </div>
				    </div>
				{% endfor %}

			  </div>
			</div>
		<!-- /catPro -->


		<!-- favBrand -->
			<div class="container mx-auto max-w-7xl my-12 px-4 border border-gray-300 rounded-lg p-4 shadow-sm">
			  <!-- عنوان -->
			  <p class="text-2xl md:text-2xl font-bold text-center mb-6" style="text-align: center; color: #124e6e;">
			  	محبوب‌ترین برندهای ما
			  </p>

			  <!-- اسلایدر -->
			  <div class="swiper mySwiper-efe rounded-lg shadow-lg bg-white p-6">
			    <div class="swiper-wrapper">
				  <!-- 16 برند (با باکس مربع و لوگو وسط) -->
					{% for brand in brands %}
				        <div class="px-4 py-1 overflow-hidden swiper-slide flex justify-center items-center h-full" style="display: flex;">
						    <div class="flex justify-center items-center" style="width: 110px; height: 110px; line-height: 0;">
						      <img src="{{ brand.logo.url }}" alt="{{ brand.name }}" class="w-full inline-block object-contain" width="110" height="110"/>
						    </div>
						</div>
					{% endfor %}
				</div>

			    <!-- دکمه‌های قبلی و بعدی -->
			    <div class="btn btn-circle absolute text-gray-800 hover:text-gray-600 z-10 next-btn-brands">>></div>
			    <div class="btn btn-circle absolute text-gray-800 hover:text-gray-600 z-10 prev-btn-brands"><<</div>
			  </div>
			</div>

			<script>
			  const swiper = new Swiper(".mySwiper-efe", {
			    slidesPerView: 8,
			    spaceBetween: 20,
			    loop: true,
			    navigation: {
			      nextEl: ".next-btn-brands",
			      prevEl: ".prev-btn-brands",
			    },
			    breakpoints: {
			      0: { slidesPerView: 3 },
			      640: { slidesPerView: 4 },
			      768: { slidesPerView: 6 },
			      1024: { slidesPerView: 8 },
			    },
			  });
			</script>
		<!-- /favBrand -->


		<!-- blog -->
			<section class="my-16 px-4 bg-gradient-to-tr from-blue-500 to-blue-900 py-5">
			  <!-- نوار بالا -->
			  <div class="flex justify-between items-center mb-8">
			    <h2 class="text-2xl font-bold text-white">بلاگ‌های پر بازدید</h2>
			    <a href="/blog" class="text-white hover:text-gray-300 transition-colors font-medium">بلاگ‌های بیشتر</a>
			  </div>

			  <!-- کارت‌ها -->
			  <div class="grid grid-cols-2 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-4 gap-2">
			    
			    <!-- کارت بلاگ -->
			    {% for blog in blogs %}
				    <div class="bg-white rounded-2xl overflow-hidden shadow-md hover:shadow-2xl transition-shadow duration-300 group">
				      <div class="overflow-hidden">
				        <img src="{{ blog.image.url }}" alt="{{ blog.title }}" class="w-full h-48 object-cover transform group-hover:scale-105 transition-transform duration-500">
				      </div>
				      <div class="p-2">
				        <h3 class="text-lg font-semibold text-gray-800 mb-2">{{ blog.title }}</h3>
				        <p class="text-gray-600 line-clamp-2 mb-4">
				          لورم ایپسوم متن آزمایشی است که برای پر کردن فضا استفاده می‌شود. این متن طولانی‌تر است تا بتوانیم محدودیت خط را تست کنیم و ببینیم سه نقطه اضافه می‌شود یا خیر.
				        </p>
				        <a href="{% url 'blog_detail' blog.slug %}" class="inline-block w-full text-center py-2 px-4 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors duration-300" style="text-align: center;">
				          ادامه مطلب
				        </a>
				      </div>
				    </div>
				{% endfor %}

			  </div>
			</section>
		<!-- /blog -->
	{% endblock %}